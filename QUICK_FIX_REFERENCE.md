# é—´æ­‡æ€§500é”™è¯¯ä¿®å¤ - å¿«é€Ÿå‚è€ƒ

## ğŸ¯ é—®é¢˜
å‰ç«¯è¯·æ±‚é—´æ­‡æ€§è¿”å›500é”™è¯¯ï¼Œä¸”åç«¯æ—¥å¿—æ— è®°å½•

## âœ… å·²ä¿®å¤
1. JsonAdapter æ–‡ä»¶é”ç«äº‰æ¡ä»¶ï¼ˆæ·»åŠ 5ç§’è¶…æ—¶ï¼‰
2. æ–‡ä»¶è¯»å–å¤±è´¥ï¼ˆæ·»åŠ 3æ¬¡é‡è¯•æœºåˆ¶ï¼‰
3. å…¨å±€æœªæ•è·å¼‚å¸¸ï¼ˆç°åœ¨ä¼šè¢«è®°å½•ï¼‰
4. é”™è¯¯å¤„ç†ä¸å®Œå–„ï¼ˆæ‰€æœ‰æ“ä½œéƒ½æœ‰try-catchï¼‰
5. æ—¥å¿—è®°å½•ç¼ºå¤±ï¼ˆæ‰€æœ‰å…³é”®æ“ä½œéƒ½æœ‰æ—¥å¿—ï¼‰

## ğŸš€ ç«‹å³æµ‹è¯•

### é‡å¯æœåŠ¡
```bash
cd backend
npm start
```

### è¿è¡Œæµ‹è¯•ï¼ˆå¯é€‰ï¼‰
```bash
cd backend
node test-concurrent-requests.js
```

### æ£€æŸ¥æ—¥å¿—
```bash
type backend\logs\error.log
type backend\logs\combined.log
```

## ğŸ“Š é¢„æœŸç»“æœ
- âœ… 500é”™è¯¯ç‡: 0%
- âœ… æ‰€æœ‰é”™è¯¯éƒ½æœ‰æ—¥å¿—è®°å½•
- âœ… å¹¶å‘è¯·æ±‚ç¨³å®š
- âœ… æ“ä½œå“åº”æ­£å¸¸

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶
- `backend/src/database/adapters/JsonAdapter.js` - æ ¸å¿ƒä¿®å¤
- `backend/src/middleware/errorHandler.js` - é”™è¯¯å¤„ç†å¢å¼º
- `backend/src/app.js` - å…¨å±€å¼‚å¸¸æ•è·
- `backend/src/routes/folderRoutes.js` - æ—¥å¿—å¢å¼º
- `backend/src/models/FileModel.js` - é”™è¯¯å¤„ç†
- `backend/src/models/FolderModel.js` - é”™è¯¯å¤„ç†

## ğŸ” å¦‚ä½•éªŒè¯ä¿®å¤
1. æµè§ˆå™¨ä¸­å¿«é€Ÿåˆ‡æ¢æ–‡ä»¶å¤¹ï¼ˆ10æ¬¡ä»¥ä¸Šï¼‰
2. åŒæ—¶ä¸Šä¼ å¤šä¸ªæ–‡ä»¶
3. å¿«é€Ÿåˆ·æ–°é¡µé¢å¤šæ¬¡
4. æ£€æŸ¥æ˜¯å¦è¿˜æœ‰500é”™è¯¯

## ğŸ“– è¯¦ç»†æ–‡æ¡£
- `INTERMITTENT_500_ERROR_FIX.md` - å®Œæ•´ä¿®å¤æŠ¥å‘Š
- `HOW_TO_TEST_FIX.md` - æµ‹è¯•æŒ‡å—

## âš¡ æ€§èƒ½è°ƒä¼˜ï¼ˆå¦‚éœ€è¦ï¼‰
ç¼–è¾‘ `backend/src/database/adapters/JsonAdapter.js`ï¼š
- æ–‡ä»¶é”è¶…æ—¶: `maxWaitTime = 5000` (é»˜è®¤5ç§’)
- é‡è¯•æ¬¡æ•°: `retries = 3` (é»˜è®¤3æ¬¡)
- é‡è¯•å»¶è¿Ÿ: `setTimeout(resolve, 100)` (é»˜è®¤100ms)

## ğŸ†˜ å¦‚æœé—®é¢˜ä»å­˜åœ¨
1. æŸ¥çœ‹ `backend/logs/error.log`ï¼ˆç°åœ¨ä¼šæœ‰è¯¦ç»†é”™è¯¯ï¼‰
2. è¿è¡Œå¹¶å‘æµ‹è¯•è„šæœ¬æŸ¥çœ‹å…·ä½“å¤±è´¥æƒ…å†µ
3. è€ƒè™‘è¿ç§»åˆ° MySQL/PostgreSQL/MongoDB
